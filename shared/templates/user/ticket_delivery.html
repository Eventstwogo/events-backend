<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Your Tickets Are Ready - {{ event_title }} - Events2Go</title>
    <!--[if mso]>
    <noscript>
        <xml>
            <o:OfficeDocumentSettings>
                <o:PixelsPerInch>96</o:PixelsPerInch>
            </o:OfficeDocumentSettings>
        </xml>
    </noscript>
    <![endif]-->
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #2d3748;
            background-color: #f7fafc;
            margin: 0;
            padding: 0;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        table {
            border-collapse: collapse;
            mso-table-lspace: 0pt;
            mso-table-rspace: 0pt;
        }

        img {
            border: 0;
            height: auto;
            line-height: 100%;
            outline: none;
            text-decoration: none;
            -ms-interpolation-mode: bicubic;
        }

        /* Container */
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            padding: 40px 30px;
            text-align: center;
        }

        .logo {
            max-width: 180px;
            height: auto;
            margin-bottom: 20px;
        }

        .header-title {
            color: #ffffff;
            font-size: 28px;
            font-weight: 700;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Ticket Section */
        .ticket-section {
            background-color: #ffffff;
            padding: 30px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }

        .ticket-badge {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .ticket-title {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .ticket-subtitle {
            font-size: 16px;
            color: #718096;
        }

        /* Content */
        .content {
            padding: 40px 30px;
            background-color: #ffffff;
        }

        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin-bottom: 25px;
        }

        .message {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin-bottom: 30px;
        }

        /* Ticket Card */
        .ticket-card {
            background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
            border: 2px dashed #667eea;
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
            overflow: hidden;
        }

        .ticket-card::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: #ffffff;
            border-radius: 50%;
        }

        .ticket-card::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: #ffffff;
            border-radius: 50%;
        }

        .event-name {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
            text-align: center;
            margin-bottom: 20px;
        }

        .ticket-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .detail-item {
            text-align: center;
            padding: 15px;
            background: #ffffff;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .detail-label {
            font-size: 12px;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
        }

        /* QR Code Section */
        .qr-section {
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            background: #ffffff;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .qr-title {
            font-size: 14px;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 15px;
        }

        .qr-code {
            max-width: 150px;
            height: auto;
            margin: 0 auto;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
        }

        .qr-note {
            font-size: 12px;
            color: #718096;
            margin-top: 10px;
        }

        /* Booking Reference */
        .booking-ref {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, #e6fffa 0%, #b2f5ea 100%);
            border-radius: 8px;
            border: 1px solid #4fd1c7;
        }

        .booking-ref-label {
            font-size: 12px;
            color: #234e52;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .booking-ref-value {
            font-size: 18px;
            font-weight: 700;
            color: #234e52;
            font-family: 'Courier New', monospace;
        }

        /* Action Buttons */
        .action-buttons {
            text-align: center;
            margin: 40px 0;
        }

        .btn {
            display: inline-block;
            padding: 16px 32px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            margin: 0 10px 10px 0;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff !important;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .btn-secondary {
            background: #ffffff;
            color: #667eea !important;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover {
            background: #667eea;
            color: #ffffff !important;
        }

        /* Instructions */
        .instructions {
            background: linear-gradient(135deg, #fef5e7 0%, #fdf2e9 100%);
            border: 1px solid #f6ad55;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }

        .instructions-title {
            font-size: 16px;
            font-weight: 600;
            color: #744210;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .instructions-icon {
            margin-right: 10px;
            font-size: 18px;
        }

        .instructions-list {
            list-style: none;
            padding: 0;
        }

        .instructions-list li {
            font-size: 14px;
            color: #744210;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .instructions-list li:before {
            content: "📋";
            position: absolute;
            left: 0;
        }

        /* Important Notes */
        .important-notes {
            background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%);
            border: 1px solid #fc8181;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }

        .notes-title {
            font-size: 16px;
            font-weight: 600;
            color: #742a2a;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .notes-icon {
            margin-right: 10px;
            font-size: 18px;
        }

        .notes-text {
            font-size: 14px;
            color: #742a2a;
            line-height: 1.6;
        }

        /* Footer */
        .footer {
            background-color: #2d3748;
            color: #a0aec0;
            padding: 40px 30px;
            text-align: center;
        }

        .footer-content {
            margin-bottom: 20px;
        }

        .footer-title {
            color: #ffffff;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .footer-text {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .footer-links {
            margin: 20px 0;
        }

        .footer-link {
            color: #48bb78;
            text-decoration: none;
            margin: 0 15px;
            font-size: 14px;
        }

        .footer-link:hover {
            color: #ffffff;
        }

        .footer-bottom {
            border-top: 1px solid #4a5568;
            padding-top: 20px;
            font-size: 12px;
            color: #718096;
        }

        /* Responsive */
        @media only screen and (max-width: 600px) {
            .email-container {
                width: 100% !important;
            }

            .header, .ticket-section, .content, .footer {
                padding-left: 20px !important;
                padding-right: 20px !important;
            }

            .ticket-details {
                grid-template-columns: 1fr !important;
                gap: 15px !important;
            }

            .btn {
                display: block !important;
                margin: 10px 0 !important;
            }

            .qr-code {
                max-width: 120px !important;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            .email-container {
                background-color: #1a202c !important;
            }

            .content, .ticket-section, .detail-item, .qr-section {
                background-color: #2d3748 !important;
            }

            .ticket-title, .greeting, .event-name, .detail-value {
                color: #ffffff !important;
            }

            .message, .ticket-subtitle, .detail-label, .qr-note {
                color: #a0aec0 !important;
            }

            .qr-title {
                color: #a0aec0 !important;
            }
        }
    </style>
</head>
<body>
    <div class="email-container">
        <!-- Header -->
        <div class="header">
            {% if logo_url %}
            <img src="{{ logo_url }}" alt="Events2Go Logo" class="logo">
            {% else %}
            <img src="/media/events2go-gradient-logo.png" alt="Events2Go Logo" class="logo">
            {% endif %}
            <h1 class="header-title">Your Tickets Are Ready!</h1>
        </div>

        <!-- Ticket Section -->
        <div class="ticket-section">
            <div class="ticket-badge">🎫</div>
            <h2 class="ticket-title">Digital Tickets Delivered</h2>
            <p class="ticket-subtitle">Present this email or download your tickets</p>
        </div>

        <!-- Content -->
        <div class="content">
            <p class="greeting">Hello <strong>{{ username }}</strong>,</p>

            <p class="message">
                Great news! Your tickets for <strong>{{ event_title }}</strong> are now ready. You can use this email as your
                ticket or download the attached tickets. Please keep this email safe and bring it with you to the event.
            </p>

            <!-- Ticket Card -->
            <div class="ticket-card">
                <h3 class="event-name">{{ event_title }}</h3>
                
                <div class="ticket-details">
                    <div class="detail-item">
                        <div class="detail-label">Date</div>
                        <div class="detail-value">{{ event_date }}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Time</div>
                        <div class="detail-value">{{ event_time }}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Venue</div>
                        <div class="detail-value">{{ venue_name }}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Tickets</div>
                        <div class="detail-value">{{ ticket_quantity }}x {{ ticket_type | default('General') }}</div>
                    </div>
                </div>

                <!-- QR Code Section -->
                {% if qr_code_url %}
                <div class="qr-section">
                    <div class="qr-title">Scan at Entry</div>
                    <img src="{{ qr_code_url }}" alt="Ticket QR Code" class="qr-code">
                    <p class="qr-note">Show this QR code at the venue entrance</p>
                </div>
                {% endif %}

                <!-- Booking Reference -->
                <div class="booking-ref">
                    <div class="booking-ref-label">Booking Reference</div>
                    <div class="booking-ref-value">{{ booking_id }}</div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                {% if download_url %}
                <a href="{{ download_url }}" class="btn btn-primary">📱 Download Tickets</a>
                {% endif %}
                {% if calendar_url %}
                <a href="{{ calendar_url }}" class="btn btn-secondary">📅 Add to Calendar</a>
                {% endif %}
                {% if event_url %}
                <a href="{{ event_url }}" class="btn btn-secondary">ℹ️ Event Details</a>
                {% endif %}
            </div>

            <!-- Instructions -->
            <div class="instructions">
                <h3 class="instructions-title">
                    <span class="instructions-icon">📋</span>
                    Entry Instructions
                </h3>
                <ul class="instructions-list">
                    <li>Arrive at least 30 minutes before the event starts</li>
                    <li>Bring a valid photo ID along with your ticket</li>
                    <li>Show your QR code or booking reference at the entrance</li>
                    <li>Keep your ticket safe throughout the event</li>
                    {% if additional_instructions %}
                    <li>{{ additional_instructions }}</li>
                    {% endif %}
                </ul>
            </div>

            <!-- Important Notes -->
            <div class="important-notes">
                <h3 class="notes-title">
                    <span class="notes-icon">⚠️</span>
                    Important Notice
                </h3>
                <p class="notes-text">
                    This ticket is non-transferable and valid only for the specified event date and time. 
                    Screenshots or photocopies may not be accepted. For any issues or questions, please contact 
                    our support team before the event date.
                </p>
            </div>

            <p class="message">
                We're excited to see you at the event! If you have any questions or need assistance, please don't hesitate 
                to contact our support team. Have a wonderful time!
            </p>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-content">
                <h3 class="footer-title">Events2Go</h3>
                <p class="footer-text">Your gateway to amazing experiences</p>

                <div class="footer-links">
                    <a href="#" class="footer-link">My Tickets</a>
                    <a href="#" class="footer-link">Event Details</a>
                    <a href="#" class="footer-link">Support</a>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; {{ year }} Events2Go. All rights reserved.</p>
                <p>This is your official event ticket. Please keep it safe.</p>
            </div>
        </div>
    </div>
</body>
</html>