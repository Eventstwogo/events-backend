<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Reset Your Password - Events2Go</title>
    <!--[if mso]>
    <noscript>
        <xml>
            <o:OfficeDocumentSettings>
                <o:PixelsPerInch>96</o:PixelsPerInch>
            </o:OfficeDocumentSettings>
        </xml>
    </noscript>
    <![endif]-->
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #2d3748;
            background-color: #f7fafc;
            margin: 0;
            padding: 0;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        table {
            border-collapse: collapse;
            mso-table-lspace: 0pt;
            mso-table-rspace: 0pt;
        }

        img {
            border: 0;
            height: auto;
            line-height: 100%;
            outline: none;
            text-decoration: none;
            -ms-interpolation-mode: bicubic;
        }

        /* Container */
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            padding: 40px 30px;
            text-align: center;
        }

        .logo {
            max-width: 180px;
            height: auto;
            margin-bottom: 20px;
        }

        .header-title {
            color: #ffffff;
            font-size: 28px;
            font-weight: 700;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Security Alert Section */
        .alert-section {
            background-color: #ffffff;
            padding: 30px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }

        .alert-badge {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            color: white;
            box-shadow: 0 4px 15px rgba(229, 62, 62, 0.3);
        }

        .alert-title {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .alert-subtitle {
            font-size: 16px;
            color: #718096;
        }

        /* Content */
        .content {
            padding: 40px 30px;
            background-color: #ffffff;
        }

        .greeting {
            font-size: 18px;
            color: #2d3748;
            margin-bottom: 25px;
        }

        .message {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.7;
            margin-bottom: 30px;
        }

        /* Request Details */
        .request-details {
            background-color: #f8fafc;
            border-left: 4px solid #e53e3e;
            border-radius: 0 12px 12px 0;
            padding: 25px;
            margin: 30px 0;
        }

        .request-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .request-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .request-label {
            color: #718096;
            font-weight: 500;
        }

        .request-value {
            color: #2d3748;
            font-weight: 600;
            font-family: 'Courier New', monospace;
        }

        /* CTA Button */
        .cta-container {
            text-align: center;
            margin: 40px 0;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            color: #ffffff !important;
            text-decoration: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 16px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(229, 62, 62, 0.4);
            border: none;
            cursor: pointer;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(229, 62, 62, 0.6);
        }

        /* Alternative Link */
        .alt-link-section {
            background-color: #f8fafc;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            border-left: 4px solid #e53e3e;
        }

        .alt-link-title {
            font-size: 14px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .alt-link {
            font-size: 14px;
            color: #e53e3e;
            word-break: break-all;
            text-decoration: none;
            background-color: #ffffff;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
            display: block;
        }

        /* Security Tips */
        .security-tips {
            background: linear-gradient(135deg, #fef5e7 0%, #fdf2e9 100%);
            border: 1px solid #f6ad55;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }

        .security-tips-title {
            font-size: 16px;
            font-weight: 600;
            color: #744210;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .security-tips-icon {
            margin-right: 10px;
            font-size: 18px;
        }

        .security-tips-list {
            list-style: none;
            padding: 0;
        }

        .security-tips-list li {
            font-size: 14px;
            color: #744210;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .security-tips-list li:before {
            content: "✓";
            color: #38a169;
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        /* Warning Section */
        .warning-section {
            background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%);
            border: 1px solid #fc8181;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }

        .warning-title {
            font-size: 16px;
            font-weight: 600;
            color: #742a2a;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .warning-icon {
            margin-right: 10px;
            font-size: 18px;
        }

        .warning-text {
            font-size: 14px;
            color: #742a2a;
            line-height: 1.6;
        }

        /* Expiry Timer */
        .expiry-section {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background-color: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .expiry-text {
            font-size: 14px;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .expiry-time {
            font-size: 24px;
            font-weight: 700;
            color: #e53e3e;
            font-family: 'Courier New', monospace;
        }

        /* Footer */
        .footer {
            background-color: #2d3748;
            color: #a0aec0;
            padding: 40px 30px;
            text-align: center;
        }

        .footer-content {
            margin-bottom: 20px;
        }

        .footer-title {
            color: #ffffff;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .footer-text {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .footer-links {
            margin: 20px 0;
        }

        .footer-link {
            color: #e53e3e;
            text-decoration: none;
            margin: 0 15px;
            font-size: 14px;
        }

        .footer-link:hover {
            color: #ffffff;
        }

        .footer-bottom {
            border-top: 1px solid #4a5568;
            padding-top: 20px;
            font-size: 12px;
            color: #718096;
        }

        /* Responsive */
        @media only screen and (max-width: 600px) {
            .email-container {
                width: 100% !important;
            }

            .header, .content, .alert-section, .footer {
                padding-left: 20px !important;
                padding-right: 20px !important;
            }

            .alert-title {
                font-size: 20px !important;
            }

            .header-title {
                font-size: 24px !important;
            }

            .cta-button {
                padding: 16px 30px !important;
                font-size: 15px !important;
            }

            .request-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            .email-container {
                background-color: #1a202c !important;
            }

            .content, .alert-section, .request-details, .alt-link-section, .expiry-section {
                background-color: #2d3748 !important;
            }

            .alert-title, .greeting, .request-title, .alt-link-title {
                color: #ffffff !important;
            }

            .message, .alert-subtitle, .request-label, .expiry-text {
                color: #a0aec0 !important;
            }

            .request-value {
                color: #ffffff !important;
            }
        }
    </style>
</head>
<body>
    <div class="email-container">
        <!-- Header -->
        <div class="header">
            {% if logo_url %}
            <img src="{{ logo_url }}" alt="Events2Go Logo" class="logo">
            {% else %}
            <img src="/media/events2go-gradient-logo.png" alt="Events2Go Logo" class="logo">
            {% endif %}
        </div>

        <!-- Alert Section -->
        <div class="alert-section">
            <div class="alert-badge">🔒</div>
            <h1 class="alert-title">Password Reset Request</h1>
            <p class="alert-subtitle">We received a request to reset your password</p>
        </div>

        <!-- Content -->
        <div class="content">
            <p class="greeting">Hello <strong>{{ username }}</strong>,</p>

            <p class="message">
                We received a request to reset the password for your Events2Go account.
                If you made this request, click the button below to create a new password.
                If you didn't request this, you can safely ignore this email.
            </p>

            <!-- Request Details -->
            <div class="request-details">
                <h3 class="request-title">Request Details</h3>
                <div class="request-item">
                    <span class="request-label">Account Email:</span>
                    <span class="request-value">{{ email }}</span>
                </div>
                <div class="request-item">
                    <span class="request-label">Request Time:</span>
                    <span class="request-value">{{ request_time }}</span>
                </div>
                <div class="request-item">
                    <span class="request-label">IP Address:</span>
                    <span class="request-value">{{ ip_address | default('Not available') }}</span>
                </div>
            </div>

            <!-- CTA Button -->
            <div class="cta-container">
                <a href="{{ reset_link }}" class="cta-button">
                    🔑 Reset My Password
                </a>
            </div>

            <!-- Expiry Timer -->
            <div class="expiry-section">
                <p class="expiry-text">This reset link will expire in:</p>
                <div class="expiry-time">{{ expiry_minutes | default('60') }} minutes</div>
            </div>

            <!-- Alternative Link -->
            <div class="alt-link-section">
                <p class="alt-link-title">Button not working? Copy and paste this link:</p>
                <a href="{{ reset_link }}" class="alt-link">{{ reset_link }}</a>
            </div>

            <!-- Security Tips -->
            <div class="security-tips">
                <h3 class="security-tips-title">
                    <span class="security-tips-icon">💡</span>
                    Password Security Tips
                </h3>
                <ul class="security-tips-list">
                    <li>Use a combination of letters, numbers, and special characters</li>
                    <li>Make your password at least 8 characters long</li>
                    <li>Avoid using personal information in your password</li>
                    <li>Don't reuse passwords from other accounts</li>
                    <li>Consider using a password manager</li>
                </ul>
            </div>

            <!-- Warning Section -->
            <div class="warning-section">
                <h3 class="warning-title">
                    <span class="warning-icon">⚠️</span>
                    Didn't Request This?
                </h3>
                <p class="warning-text">
                    If you didn't request a password reset, please ignore this email. Your password will remain unchanged.
                    However, if you're concerned about the security of your account, please contact our support team immediately
                    or consider changing your password as a precautionary measure.
                </p>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-content">
                <h3 class="footer-title">Events2Go Security</h3>
                <p class="footer-text">Your account security is our top priority</p>

                <div class="footer-links">
                    <a href="#" class="footer-link">Security Center</a>
                    <a href="#" class="footer-link">Help & Support</a>
                    <a href="#" class="footer-link">Contact Us</a>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; {{ year }} Events2Go. All rights reserved.</p>
                <p>This is an automated security message, please do not reply to this email.</p>
            </div>
        </div>
    </div>
</body>
</html>
